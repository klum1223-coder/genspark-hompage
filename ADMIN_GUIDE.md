# 관리자 가이드 - Sanity Studio 사용법

## 목차
1. [시작하기](#시작하기)
2. [Sanity Studio 접속](#sanity-studio-접속)
3. [콘텐츠 관리](#콘텐츠-관리)
4. [각 섹션별 가이드](#각-섹션별-가이드)
5. [이미지 관리](#이미지-관리)
6. [문제 해결](#문제-해결)

---

## 시작하기

### 필수 요구사항
- Sanity 계정 (https://www.sanity.io 에서 가입)
- 프로젝트 ID 및 API 토큰 발급

### 초기 설정

1. **환경 변수 설정**
   - `.env.local` 파일에 다음 정보 입력:
   ```
   NEXT_PUBLIC_SANITY_PROJECT_ID=your-project-id
   NEXT_PUBLIC_SANITY_DATASET=production
   NEXT_PUBLIC_SANITY_API_VERSION=2024-01-01
   SANITY_API_TOKEN=your-api-token
   ```

2. **CORS 설정**
   - Sanity 관리 페이지 (https://www.sanity.io/manage) 접속
   - 프로젝트 선택 → Settings → API → CORS Origins
   - 다음 도메인 추가:
     - `http://localhost:3000` (개발용)
     - 배포된 도메인 (예: `https://your-church.com`)

---

## Sanity Studio 접속

### 로컬 환경
1. 브라우저에서 `http://localhost:3000/studio` 접속
2. Sanity 계정으로 로그인

### 배포 환경
1. 배포된 사이트 주소 + `/studio` 접속
   - 예: `https://your-church.com/studio`
2. Sanity 계정으로 로그인

### 로그인 후 화면
- 왼쪽 사이드바: 콘텐츠 타입 목록
- 중앙: 문서 목록 및 편집 영역
- 오른쪽: 문서 속성 및 미리보기

---

## 콘텐츠 관리

### 기본 작업 흐름

1. **새 문서 만들기**
   - 왼쪽 사이드바에서 원하는 콘텐츠 타입 선택
   - 우측 상단 `+ Create` 버튼 클릭
   - 필수 필드 입력
   - `Publish` 버튼 클릭

2. **기존 문서 수정**
   - 문서 목록에서 수정할 문서 클릭
   - 내용 수정
   - `Publish` 버튼 클릭하여 변경사항 저장

3. **문서 삭제**
   - 문서 선택
   - 우측 상단 메뉴 (⋮) → `Delete` 선택
   - 확인 후 삭제

4. **문서 비활성화**
   - 문서 하단의 `활성화` 체크박스 해제
   - `Publish` 버튼 클릭
   - 비활성화된 문서는 웹사이트에 표시되지 않음

---

## 각 섹션별 가이드

### 1. 팝업 공지 (Popup)

**용도**: 홈페이지 메인에 표시되는 중요 공지사항

**작성 방법**:
1. 좌측 사이드바 → `팝업 공지` 선택
2. `+ Create` 버튼 클릭
3. 필수 필드 입력:
   - **제목**: 팝업 상단에 표시될 제목
   - **내용**: Rich text 편집기로 내용 작성
     - 굵게, 기울임, 링크 등 서식 지원
   - **노출 시작일**: 팝업이 표시되기 시작할 날짜/시간
   - **노출 종료일**: 팝업이 사라질 날짜/시간
4. 선택 필드:
   - **이미지**: 팝업에 표시할 이미지 업로드
   - **링크 URL**: 클릭 시 이동할 페이지 주소
   - **링크 버튼 텍스트**: 버튼에 표시될 텍스트 (예: "자세히 보기")
   - **우선순위**: 숫자가 높을수록 먼저 표시 (여러 팝업이 있을 경우)
5. **활성화** 체크박스 확인 (체크되어야 표시됨)
6. `Publish` 버튼 클릭

**팁**:
- 한 번에 하나의 팝업만 활성화하는 것을 권장
- 우선순위가 높은 팝업이 먼저 표시됨
- 노출 기간이 지나면 자동으로 표시되지 않음

---

### 2. 교회 사역 (Ministry)

**용도**: 교회의 각종 사역 및 부서 소개

**작성 방법**:
1. 좌측 사이드바 → `교회 사역` 선택
2. `+ Create` 버튼 클릭
3. 필수 필드 입력:
   - **사역명**: 사역 이름 (예: "청년부", "주일학교")
   - **카테고리**: 예배/교육/선교/친교/기타 중 선택
   - **간단한 소개**: 2-3줄 정도의 짧은 설명
   - **대표 이미지**: 사역을 대표하는 이미지 업로드
   - **모임 시간**: 모임 일시 (예: "주일 오후 2시")
   - **모임 장소**: 장소 (예: "교육관 3층")
   - **담당자**: 책임자 이름
4. 선택 필드:
   - **상세 내용**: Rich text로 더 자세한 설명 작성
   - **연락처**: 담당자 연락처
   - **정렬 순서**: 숫자가 작을수록 먼저 표시
5. **활성화** 체크박스 확인
6. `Publish` 버튼 클릭

**팁**:
- 정렬 순서를 10, 20, 30... 으로 설정하면 나중에 삽입하기 쉬움
- 카테고리별로 필터링할 수 있으므로 정확히 선택
- 이미지는 400x300px 비율 권장

---

### 3. 설교 (Sermon)

**용도**: 주일 및 수요 설교 영상/음성 관리

**작성 방법**:
1. 좌측 사이드바 → `설교` 선택
2. `+ Create` 버튼 클릭
3. 필수 필드 입력:
   - **제목**: 설교 제목
   - **설교자**: 목사님/전도사님 이름
   - **설교 날짜**: 설교한 날짜
   - **본문 말씀**: 성경 구절 (예: "요한복음 3:16-21")
   - **카테고리**: 주일/수요/특별 설교 선택
4. 선택 필드:
   - **시리즈명**: 연속 설교인 경우 시리즈 이름
   - **요약**: 설교 내용 간단 요약
   - **상세 내용**: Rich text로 설교 내용 전체 작성
   - **썸네일**: 설교 대표 이미지
   - **오디오 URL**: 음성 파일 URL (예: YouTube, SoundCloud)
   - **비디오 URL**: 영상 URL
   - **첨부파일**: PDF 등 추가 자료
5. **활성화** 체크박스 확인
6. `Publish` 버튼 클릭

**팁**:
- 오디오/비디오는 YouTube 등 외부 서비스 URL 사용 권장
- 요약은 목록 페이지에 표시되므로 간단히 작성
- 날짜별로 자동 정렬됨

---

### 4. 교회 소식 (News)

**용도**: 교회 공지사항, 행사, 소식 전달

**작성 방법**:
1. 좌측 사이드바 → `교회 소식` 선택
2. `+ Create` 버튼 클릭
3. 필수 필드 입력:
   - **제목**: 소식 제목
   - **카테고리**: 공지/행사/소식 중 선택
   - **날짜**: 게시 날짜
   - **작성자**: 작성자 이름
   - **요약**: 1-2줄 짧은 요약
   - **내용**: Rich text로 전체 내용 작성
4. 선택 필드:
   - **썸네일**: 대표 이미지
   - **주요 소식**: 체크하면 메인 페이지에 강조 표시
   - **조회수**: 자동 증가 (수동 설정도 가능)
5. **활성화** 체크박스 확인
6. `Publish` 버튼 클릭

**팁**:
- 주요 소식은 최대 3개까지만 선택 권장
- 썸네일 이미지는 16:9 비율 권장
- 카테고리별로 배지 색상이 다르게 표시됨

---

### 5. 사진 앨범 (Album)

**용도**: 교회 행사 및 활동 사진 관리

**작성 방법**:
1. 좌측 사이드바 → `사진 앨범` 선택
2. `+ Create` 버튼 클릭
3. 필수 필드 입력:
   - **앨범명**: 앨범 제목 (예: "2024 여름수련회")
   - **날짜**: 행사 날짜
   - **카테고리**: 예배/행사/선교/교육/친교 중 선택
   - **대표 이미지**: 앨범 커버 이미지
   - **사진들**: 여러 장의 사진 업로드
4. 선택 필드:
   - **설명**: 앨범에 대한 간단한 설명
   - 각 사진별 **사진 설명** 추가 가능
5. **활성화** 체크박스 확인
6. `Publish` 버튼 클릭

**사진 업로드 방법**:
1. `사진들` 필드에서 `Add item` 클릭
2. `Upload` 버튼으로 이미지 파일 선택
3. 업로드 후 `사진 설명` 입력 (선택)
4. 여러 장을 한 번에 업로드 가능
5. 드래그로 순서 변경 가능

**팁**:
- 대표 이미지는 정사각형 비율 권장
- 사진은 최대 50장까지 권장 (성능 고려)
- 각 사진에 설명을 추가하면 라이트박스에서 표시됨
- 업로드 전 이미지 크기 최적화 권장 (2MB 이하)

---

## 이미지 관리

### 이미지 업로드

1. **드래그 앤 드롭**
   - 이미지 필드에 파일을 드래그하여 업로드

2. **파일 선택**
   - `Upload` 버튼 클릭 → 파일 선택

3. **URL 입력**
   - 일부 필드에서 외부 이미지 URL 직접 입력 가능

### 이미지 편집

1. **핫스팟 설정**
   - 업로드된 이미지 클릭
   - `Edit` 버튼 클릭
   - 핫스팟 (중요한 부분) 지정
   - 반응형 크롭 시 중요 부분이 잘리지 않음

2. **크롭**
   - 이미지 편집 모드에서 크롭 도구 사용
   - 원하는 영역만 선택

### 권장 이미지 사양

| 용도 | 권장 크기 | 비율 | 최대 용량 |
|------|-----------|------|-----------|
| 팝업 이미지 | 800x600px | 4:3 | 500KB |
| 사역 대표 이미지 | 800x600px | 4:3 | 500KB |
| 설교 썸네일 | 1280x720px | 16:9 | 300KB |
| 소식 썸네일 | 1200x675px | 16:9 | 400KB |
| 앨범 커버 | 800x800px | 1:1 | 500KB |
| 앨범 사진 | 1920x1080px | 자유 | 2MB |

---

## 문제 해결

### 로그인 안 됨
- **원인**: 권한 없음
- **해결**: 프로젝트 관리자에게 초대 요청

### 이미지 업로드 실패
- **원인**: 파일 크기 초과 또는 지원하지 않는 형식
- **해결**: 
  - 이미지 크기를 5MB 이하로 압축
  - JPG, PNG, WebP 형식만 사용

### 변경사항이 웹사이트에 반영 안 됨
- **원인**: Publish 하지 않았거나 캐시 문제
- **해결**:
  1. `Publish` 버튼을 눌렀는지 확인
  2. 브라우저 새로고침 (Ctrl + F5)
  3. 5-10분 후 다시 확인 (ISR 캐시)

### Studio가 느림
- **원인**: 이미지가 너무 많거나 네트워크 문제
- **해결**:
  - 이미지 최적화 후 재업로드
  - 브라우저 캐시 삭제
  - 다른 브라우저 시도

---

## 추가 도움말

### 문의 채널
- **기술 지원**: info@church.com
- **Sanity 공식 문서**: https://www.sanity.io/docs
- **커뮤니티**: https://www.sanity.io/community

### 유용한 단축키
- `Ctrl + S` / `Cmd + S`: 저장 (초안)
- `Ctrl + Shift + P` / `Cmd + Shift + P`: Publish
- `Ctrl + Z` / `Cmd + Z`: 실행 취소
- `Ctrl + /` / `Cmd + /`: 검색

### 모범 사례
1. **정기적 백업**: Sanity는 자동 백업되지만 중요 콘텐츠는 별도 보관
2. **초안 활용**: 완료되지 않은 문서는 Publish하지 말고 초안으로 저장
3. **일관성 유지**: 제목, 카테고리 등 일관된 명명 규칙 사용
4. **이미지 최적화**: 업로드 전 이미지 크기/용량 최적화
5. **테스트**: 중요한 변경 전 비활성화 상태에서 먼저 테스트

---

## 버전 히스토리

| 버전 | 날짜 | 변경사항 |
|------|------|----------|
| 1.0 | 2024-01-01 | 초기 버전 작성 |

---

**문서 작성**: AI Developer  
**최종 수정**: 2024-01-01  
**다음 리뷰 예정**: 2024-04-01
